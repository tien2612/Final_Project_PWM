ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"input_processing.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.global	buttonState
  16              		.section	.bss.buttonState,"aw",%nobits
  19              	buttonState:
  20 0000 00       		.space	1
  21              		.comm	str,50,4
  22              		.section	.text.WhichButtonIsPressed,"ax",%progbits
  23              		.align	1
  24              		.global	WhichButtonIsPressed
  25              		.arch armv7-m
  26              		.syntax unified
  27              		.thumb
  28              		.thumb_func
  29              		.fpu softvfp
  31              	WhichButtonIsPressed:
  32              	.LFB65:
  33              		.file 1 "./Core/Src/input_processing.c"
   1:./Core/Src/input_processing.c **** /*
   2:./Core/Src/input_processing.c ****  * input_processing.c
   3:./Core/Src/input_processing.c ****  *
   4:./Core/Src/input_processing.c ****  *  Created on: Dec 8, 2022
   5:./Core/Src/input_processing.c ****  *      Author: xanlo
   6:./Core/Src/input_processing.c ****  */
   7:./Core/Src/input_processing.c **** 
   8:./Core/Src/input_processing.c **** 
   9:./Core/Src/input_processing.c **** #include "main.h"
  10:./Core/Src/input_processing.c **** #include "input_reading.h"
  11:./Core/Src/input_processing.c **** #include "input_processing.h"
  12:./Core/Src/input_processing.c **** #include "global.h"
  13:./Core/Src/input_processing.c **** #include "software_timer.h"
  14:./Core/Src/input_processing.c **** #include "displayUart.h"
  15:./Core/Src/input_processing.c **** #include "traffic_light.h"
  16:./Core/Src/input_processing.c **** 
  17:./Core/Src/input_processing.c **** enum ButtonState{BUTTON_RELEASED, BUTTON_PRESSED, BUTTON_PRESSED_MORE_THAN_1_SECOND} ;
  18:./Core/Src/input_processing.c **** enum ButtonState buttonState = BUTTON_RELEASED;
  19:./Core/Src/input_processing.c **** 
  20:./Core/Src/input_processing.c **** extern UART_HandleTypeDef huart2;
  21:./Core/Src/input_processing.c **** char str[50];
  22:./Core/Src/input_processing.c **** 
  23:./Core/Src/input_processing.c **** int WhichButtonIsPressed() {
  34              		.loc 1 23 28
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 0
  37              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 2


  38 0000 80B5     		push	{r7, lr}
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 7, -8
  41              		.cfi_offset 14, -4
  42 0002 00AF     		add	r7, sp, #0
  43              		.cfi_def_cfa_register 7
  24:./Core/Src/input_processing.c **** 	if (is_button_pressed(0)) return 1;
  44              		.loc 1 24 6
  45 0004 0020     		movs	r0, #0
  46 0006 FFF7FEFF 		bl	is_button_pressed
  47 000a 0346     		mov	r3, r0
  48              		.loc 1 24 5
  49 000c 002B     		cmp	r3, #0
  50 000e 01D0     		beq	.L2
  51              		.loc 1 24 35 discriminator 1
  52 0010 0123     		movs	r3, #1
  53 0012 10E0     		b	.L3
  54              	.L2:
  25:./Core/Src/input_processing.c **** 	if (is_button_pressed(1)) return 2;
  55              		.loc 1 25 6
  56 0014 0120     		movs	r0, #1
  57 0016 FFF7FEFF 		bl	is_button_pressed
  58 001a 0346     		mov	r3, r0
  59              		.loc 1 25 5
  60 001c 002B     		cmp	r3, #0
  61 001e 01D0     		beq	.L4
  62              		.loc 1 25 35 discriminator 1
  63 0020 0223     		movs	r3, #2
  64 0022 08E0     		b	.L3
  65              	.L4:
  26:./Core/Src/input_processing.c **** 	if (is_button_pressed(2)) return 3;
  66              		.loc 1 26 6
  67 0024 0220     		movs	r0, #2
  68 0026 FFF7FEFF 		bl	is_button_pressed
  69 002a 0346     		mov	r3, r0
  70              		.loc 1 26 5
  71 002c 002B     		cmp	r3, #0
  72 002e 01D0     		beq	.L5
  73              		.loc 1 26 35 discriminator 1
  74 0030 0323     		movs	r3, #3
  75 0032 00E0     		b	.L3
  76              	.L5:
  27:./Core/Src/input_processing.c **** 
  28:./Core/Src/input_processing.c **** 	return 0; // None of these buttons are pressed
  77              		.loc 1 28 9
  78 0034 0023     		movs	r3, #0
  79              	.L3:
  29:./Core/Src/input_processing.c **** }
  80              		.loc 1 29 1
  81 0036 1846     		mov	r0, r3
  82 0038 80BD     		pop	{r7, pc}
  83              		.cfi_endproc
  84              	.LFE65:
  86              		.section	.text.clear_vertical,"ax",%progbits
  87              		.align	1
  88              		.global	clear_vertical
  89              		.syntax unified
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 3


  90              		.thumb
  91              		.thumb_func
  92              		.fpu softvfp
  94              	clear_vertical:
  95              	.LFB66:
  30:./Core/Src/input_processing.c **** 
  31:./Core/Src/input_processing.c **** void clear_vertical() {
  96              		.loc 1 31 23
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 1, uses_anonymous_args = 0
 100 0000 80B5     		push	{r7, lr}
 101              		.cfi_def_cfa_offset 8
 102              		.cfi_offset 7, -8
 103              		.cfi_offset 14, -4
 104 0002 00AF     		add	r7, sp, #0
 105              		.cfi_def_cfa_register 7
  32:./Core/Src/input_processing.c **** 	clear_led(TRAFFIC_1_LED);
 106              		.loc 1 32 2
 107 0004 2820     		movs	r0, #40
 108 0006 FFF7FEFF 		bl	clear_led
  33:./Core/Src/input_processing.c **** }
 109              		.loc 1 33 1
 110 000a 00BF     		nop
 111 000c 80BD     		pop	{r7, pc}
 112              		.cfi_endproc
 113              	.LFE66:
 115              		.section	.text.clear_horizontal,"ax",%progbits
 116              		.align	1
 117              		.global	clear_horizontal
 118              		.syntax unified
 119              		.thumb
 120              		.thumb_func
 121              		.fpu softvfp
 123              	clear_horizontal:
 124              	.LFB67:
  34:./Core/Src/input_processing.c **** 
  35:./Core/Src/input_processing.c **** void clear_horizontal() {
 125              		.loc 1 35 25
 126              		.cfi_startproc
 127              		@ args = 0, pretend = 0, frame = 0
 128              		@ frame_needed = 1, uses_anonymous_args = 0
 129 0000 80B5     		push	{r7, lr}
 130              		.cfi_def_cfa_offset 8
 131              		.cfi_offset 7, -8
 132              		.cfi_offset 14, -4
 133 0002 00AF     		add	r7, sp, #0
 134              		.cfi_def_cfa_register 7
  36:./Core/Src/input_processing.c **** 	clear_led(TRAFFIC_2_LED);
 135              		.loc 1 36 2
 136 0004 2920     		movs	r0, #41
 137 0006 FFF7FEFF 		bl	clear_led
  37:./Core/Src/input_processing.c **** }
 138              		.loc 1 37 1
 139 000a 00BF     		nop
 140 000c 80BD     		pop	{r7, pc}
 141              		.cfi_endproc
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 4


 142              	.LFE67:
 144              		.section	.text.vertical_processing,"ax",%progbits
 145              		.align	1
 146              		.global	vertical_processing
 147              		.syntax unified
 148              		.thumb
 149              		.thumb_func
 150              		.fpu softvfp
 152              	vertical_processing:
 153              	.LFB68:
  38:./Core/Src/input_processing.c **** 
  39:./Core/Src/input_processing.c **** void vertical_processing() {
 154              		.loc 1 39 28
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 0
 157              		@ frame_needed = 1, uses_anonymous_args = 0
 158 0000 80B5     		push	{r7, lr}
 159              		.cfi_def_cfa_offset 8
 160              		.cfi_offset 7, -8
 161              		.cfi_offset 14, -4
 162 0002 00AF     		add	r7, sp, #0
 163              		.cfi_def_cfa_register 7
  40:./Core/Src/input_processing.c **** 	clear_vertical();
 164              		.loc 1 40 2
 165 0004 FFF7FEFF 		bl	clear_vertical
  41:./Core/Src/input_processing.c **** 	switch (CURRENT_STATE[0]) {
 166              		.loc 1 41 23
 167 0008 0E4B     		ldr	r3, .L15
 168 000a 1B68     		ldr	r3, [r3]
 169              		.loc 1 41 2
 170 000c 022B     		cmp	r3, #2
 171 000e 10D0     		beq	.L9
 172 0010 022B     		cmp	r3, #2
 173 0012 13DC     		bgt	.L14
 174 0014 002B     		cmp	r3, #0
 175 0016 02D0     		beq	.L11
 176 0018 012B     		cmp	r3, #1
 177 001a 05D0     		beq	.L12
  42:./Core/Src/input_processing.c **** 	case 0:
  43:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_1_LED, RED_COLOR);
  44:./Core/Src/input_processing.c **** 		break;
  45:./Core/Src/input_processing.c **** 	case 1:
  46:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_1_LED, AMBER_COLOR);
  47:./Core/Src/input_processing.c **** 		break;
  48:./Core/Src/input_processing.c **** 	case 2:
  49:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_1_LED, GREEN_COLOR);
  50:./Core/Src/input_processing.c **** 		break;
  51:./Core/Src/input_processing.c **** 	default:
  52:./Core/Src/input_processing.c **** 		break;
 178              		.loc 1 52 3
 179 001c 0EE0     		b	.L14
 180              	.L11:
  43:./Core/Src/input_processing.c **** 		break;
 181              		.loc 1 43 3
 182 001e 1E21     		movs	r1, #30
 183 0020 2820     		movs	r0, #40
 184 0022 FFF7FEFF 		bl	set_led_color
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 5


  44:./Core/Src/input_processing.c **** 	case 1:
 185              		.loc 1 44 3
 186 0026 0AE0     		b	.L13
 187              	.L12:
  46:./Core/Src/input_processing.c **** 		break;
 188              		.loc 1 46 3
 189 0028 1F21     		movs	r1, #31
 190 002a 2820     		movs	r0, #40
 191 002c FFF7FEFF 		bl	set_led_color
  47:./Core/Src/input_processing.c **** 	case 2:
 192              		.loc 1 47 3
 193 0030 05E0     		b	.L13
 194              	.L9:
  49:./Core/Src/input_processing.c **** 		break;
 195              		.loc 1 49 3
 196 0032 2021     		movs	r1, #32
 197 0034 2820     		movs	r0, #40
 198 0036 FFF7FEFF 		bl	set_led_color
  50:./Core/Src/input_processing.c **** 	default:
 199              		.loc 1 50 3
 200 003a 00E0     		b	.L13
 201              	.L14:
 202              		.loc 1 52 3
 203 003c 00BF     		nop
 204              	.L13:
  53:./Core/Src/input_processing.c **** 	}
  54:./Core/Src/input_processing.c **** }
 205              		.loc 1 54 1
 206 003e 00BF     		nop
 207 0040 80BD     		pop	{r7, pc}
 208              	.L16:
 209 0042 00BF     		.align	2
 210              	.L15:
 211 0044 00000000 		.word	CURRENT_STATE
 212              		.cfi_endproc
 213              	.LFE68:
 215              		.section	.text.horizontal_processing,"ax",%progbits
 216              		.align	1
 217              		.global	horizontal_processing
 218              		.syntax unified
 219              		.thumb
 220              		.thumb_func
 221              		.fpu softvfp
 223              	horizontal_processing:
 224              	.LFB69:
  55:./Core/Src/input_processing.c **** 
  56:./Core/Src/input_processing.c **** void horizontal_processing() {
 225              		.loc 1 56 30
 226              		.cfi_startproc
 227              		@ args = 0, pretend = 0, frame = 0
 228              		@ frame_needed = 1, uses_anonymous_args = 0
 229 0000 80B5     		push	{r7, lr}
 230              		.cfi_def_cfa_offset 8
 231              		.cfi_offset 7, -8
 232              		.cfi_offset 14, -4
 233 0002 00AF     		add	r7, sp, #0
 234              		.cfi_def_cfa_register 7
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 6


  57:./Core/Src/input_processing.c **** 	clear_horizontal();
 235              		.loc 1 57 2
 236 0004 FFF7FEFF 		bl	clear_horizontal
  58:./Core/Src/input_processing.c **** 	switch (CURRENT_STATE[1]) {
 237              		.loc 1 58 23
 238 0008 0E4B     		ldr	r3, .L24
 239 000a 5B68     		ldr	r3, [r3, #4]
 240              		.loc 1 58 2
 241 000c 022B     		cmp	r3, #2
 242 000e 10D0     		beq	.L18
 243 0010 022B     		cmp	r3, #2
 244 0012 13DC     		bgt	.L23
 245 0014 002B     		cmp	r3, #0
 246 0016 02D0     		beq	.L20
 247 0018 012B     		cmp	r3, #1
 248 001a 05D0     		beq	.L21
  59:./Core/Src/input_processing.c **** 	case 0:
  60:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_2_LED, RED_COLOR);
  61:./Core/Src/input_processing.c **** 		break;
  62:./Core/Src/input_processing.c **** 	case 1:
  63:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_2_LED, AMBER_COLOR);
  64:./Core/Src/input_processing.c **** 		break;
  65:./Core/Src/input_processing.c **** 	case 2:
  66:./Core/Src/input_processing.c **** 		set_led_color(TRAFFIC_2_LED, GREEN_COLOR);
  67:./Core/Src/input_processing.c **** 		break;
  68:./Core/Src/input_processing.c **** 	default:
  69:./Core/Src/input_processing.c **** 		break;
 249              		.loc 1 69 3
 250 001c 0EE0     		b	.L23
 251              	.L20:
  60:./Core/Src/input_processing.c **** 		break;
 252              		.loc 1 60 3
 253 001e 1E21     		movs	r1, #30
 254 0020 2920     		movs	r0, #41
 255 0022 FFF7FEFF 		bl	set_led_color
  61:./Core/Src/input_processing.c **** 	case 1:
 256              		.loc 1 61 3
 257 0026 0AE0     		b	.L22
 258              	.L21:
  63:./Core/Src/input_processing.c **** 		break;
 259              		.loc 1 63 3
 260 0028 1F21     		movs	r1, #31
 261 002a 2920     		movs	r0, #41
 262 002c FFF7FEFF 		bl	set_led_color
  64:./Core/Src/input_processing.c **** 	case 2:
 263              		.loc 1 64 3
 264 0030 05E0     		b	.L22
 265              	.L18:
  66:./Core/Src/input_processing.c **** 		break;
 266              		.loc 1 66 3
 267 0032 2021     		movs	r1, #32
 268 0034 2920     		movs	r0, #41
 269 0036 FFF7FEFF 		bl	set_led_color
  67:./Core/Src/input_processing.c **** 	default:
 270              		.loc 1 67 3
 271 003a 00E0     		b	.L22
 272              	.L23:
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 7


 273              		.loc 1 69 3
 274 003c 00BF     		nop
 275              	.L22:
  70:./Core/Src/input_processing.c **** 	}
  71:./Core/Src/input_processing.c **** }
 276              		.loc 1 71 1
 277 003e 00BF     		nop
 278 0040 80BD     		pop	{r7, pc}
 279              	.L25:
 280 0042 00BF     		.align	2
 281              	.L24:
 282 0044 00000000 		.word	CURRENT_STATE
 283              		.cfi_endproc
 284              	.LFE69:
 286              		.section	.text.state_update,"ax",%progbits
 287              		.align	1
 288              		.global	state_update
 289              		.syntax unified
 290              		.thumb
 291              		.thumb_func
 292              		.fpu softvfp
 294              	state_update:
 295              	.LFB70:
  72:./Core/Src/input_processing.c **** 
  73:./Core/Src/input_processing.c **** void state_update(int idx) {
 296              		.loc 1 73 28
 297              		.cfi_startproc
 298              		@ args = 0, pretend = 0, frame = 8
 299              		@ frame_needed = 1, uses_anonymous_args = 0
 300              		@ link register save eliminated.
 301 0000 80B4     		push	{r7}
 302              		.cfi_def_cfa_offset 4
 303              		.cfi_offset 7, -4
 304 0002 83B0     		sub	sp, sp, #12
 305              		.cfi_def_cfa_offset 16
 306 0004 00AF     		add	r7, sp, #0
 307              		.cfi_def_cfa_register 7
 308 0006 7860     		str	r0, [r7, #4]
  74:./Core/Src/input_processing.c **** 	if (idx == 0) {
 309              		.loc 1 74 5
 310 0008 7B68     		ldr	r3, [r7, #4]
 311 000a 002B     		cmp	r3, #0
 312 000c 1ED1     		bne	.L27
  75:./Core/Src/input_processing.c **** 		switch (CURRENT_STATE[idx]) {
 313              		.loc 1 75 24
 314 000e 214A     		ldr	r2, .L35
 315 0010 7B68     		ldr	r3, [r7, #4]
 316 0012 52F82330 		ldr	r3, [r2, r3, lsl #2]
 317              		.loc 1 75 3
 318 0016 022B     		cmp	r3, #2
 319 0018 12D0     		beq	.L28
 320 001a 022B     		cmp	r3, #2
 321 001c 29DC     		bgt	.L34
 322 001e 002B     		cmp	r3, #0
 323 0020 02D0     		beq	.L30
 324 0022 012B     		cmp	r3, #1
 325 0024 06D0     		beq	.L31
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 8


  76:./Core/Src/input_processing.c **** 		case 0:
  77:./Core/Src/input_processing.c **** 			CURRENT_STATE[idx] = 2;
  78:./Core/Src/input_processing.c **** 			break;
  79:./Core/Src/input_processing.c **** 		case 1:
  80:./Core/Src/input_processing.c **** 			CURRENT_STATE[idx] = 0;
  81:./Core/Src/input_processing.c **** 			break;
  82:./Core/Src/input_processing.c **** 		case 2:
  83:./Core/Src/input_processing.c **** 			CURRENT_STATE[idx] = 1;
  84:./Core/Src/input_processing.c **** 			break;
  85:./Core/Src/input_processing.c **** 		default:
  86:./Core/Src/input_processing.c **** 			break;
 326              		.loc 1 86 4
 327 0026 24E0     		b	.L34
 328              	.L30:
  77:./Core/Src/input_processing.c **** 			break;
 329              		.loc 1 77 23
 330 0028 1A4A     		ldr	r2, .L35
 331 002a 7B68     		ldr	r3, [r7, #4]
 332 002c 0221     		movs	r1, #2
 333 002e 42F82310 		str	r1, [r2, r3, lsl #2]
  78:./Core/Src/input_processing.c **** 		case 1:
 334              		.loc 1 78 4
 335 0032 1FE0     		b	.L33
 336              	.L31:
  80:./Core/Src/input_processing.c **** 			break;
 337              		.loc 1 80 23
 338 0034 174A     		ldr	r2, .L35
 339 0036 7B68     		ldr	r3, [r7, #4]
 340 0038 0021     		movs	r1, #0
 341 003a 42F82310 		str	r1, [r2, r3, lsl #2]
  81:./Core/Src/input_processing.c **** 		case 2:
 342              		.loc 1 81 4
 343 003e 19E0     		b	.L33
 344              	.L28:
  83:./Core/Src/input_processing.c **** 			break;
 345              		.loc 1 83 23
 346 0040 144A     		ldr	r2, .L35
 347 0042 7B68     		ldr	r3, [r7, #4]
 348 0044 0121     		movs	r1, #1
 349 0046 42F82310 		str	r1, [r2, r3, lsl #2]
  84:./Core/Src/input_processing.c **** 		default:
 350              		.loc 1 84 4
 351 004a 13E0     		b	.L33
 352              	.L27:
  87:./Core/Src/input_processing.c **** 		}
  88:./Core/Src/input_processing.c **** 	} else {
  89:./Core/Src/input_processing.c **** 		CURRENT_STATE[idx] = (CURRENT_STATE[idx] - 1 + 3) % 3;
 353              		.loc 1 89 38
 354 004c 114A     		ldr	r2, .L35
 355 004e 7B68     		ldr	r3, [r7, #4]
 356 0050 52F82330 		ldr	r3, [r2, r3, lsl #2]
 357              		.loc 1 89 48
 358 0054 991C     		adds	r1, r3, #2
 359              		.loc 1 89 53
 360 0056 104B     		ldr	r3, .L35+4
 361 0058 83FB0132 		smull	r3, r2, r3, r1
 362 005c CB17     		asrs	r3, r1, #31
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 9


 363 005e D21A     		subs	r2, r2, r3
 364 0060 1346     		mov	r3, r2
 365 0062 5B00     		lsls	r3, r3, #1
 366 0064 1344     		add	r3, r3, r2
 367 0066 CA1A     		subs	r2, r1, r3
 368              		.loc 1 89 22
 369 0068 0A49     		ldr	r1, .L35
 370 006a 7B68     		ldr	r3, [r7, #4]
 371 006c 41F82320 		str	r2, [r1, r3, lsl #2]
 372 0070 00E0     		b	.L33
 373              	.L34:
  86:./Core/Src/input_processing.c **** 		}
 374              		.loc 1 86 4
 375 0072 00BF     		nop
 376              	.L33:
  90:./Core/Src/input_processing.c **** 	}
  91:./Core/Src/input_processing.c **** 	SEG7_CLOCK[idx] = LED_TIME[CURRENT_STATE[idx]];
 377              		.loc 1 91 42
 378 0074 074A     		ldr	r2, .L35
 379 0076 7B68     		ldr	r3, [r7, #4]
 380 0078 52F82330 		ldr	r3, [r2, r3, lsl #2]
 381              		.loc 1 91 28
 382 007c 074A     		ldr	r2, .L35+8
 383 007e 52F82320 		ldr	r2, [r2, r3, lsl #2]
 384              		.loc 1 91 18
 385 0082 0749     		ldr	r1, .L35+12
 386 0084 7B68     		ldr	r3, [r7, #4]
 387 0086 41F82320 		str	r2, [r1, r3, lsl #2]
  92:./Core/Src/input_processing.c **** }
 388              		.loc 1 92 1
 389 008a 00BF     		nop
 390 008c 0C37     		adds	r7, r7, #12
 391              		.cfi_def_cfa_offset 4
 392 008e BD46     		mov	sp, r7
 393              		.cfi_def_cfa_register 13
 394              		@ sp needed
 395 0090 80BC     		pop	{r7}
 396              		.cfi_restore 7
 397              		.cfi_def_cfa_offset 0
 398 0092 7047     		bx	lr
 399              	.L36:
 400              		.align	2
 401              	.L35:
 402 0094 00000000 		.word	CURRENT_STATE
 403 0098 56555555 		.word	1431655766
 404 009c 00000000 		.word	LED_TIME
 405 00a0 00000000 		.word	SEG7_CLOCK
 406              		.cfi_endproc
 407              	.LFE70:
 409              		.section	.text.check_state,"ax",%progbits
 410              		.align	1
 411              		.global	check_state
 412              		.syntax unified
 413              		.thumb
 414              		.thumb_func
 415              		.fpu softvfp
 417              	check_state:
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 10


 418              	.LFB71:
  93:./Core/Src/input_processing.c **** 
  94:./Core/Src/input_processing.c **** void check_state() {
 419              		.loc 1 94 20
 420              		.cfi_startproc
 421              		@ args = 0, pretend = 0, frame = 0
 422              		@ frame_needed = 1, uses_anonymous_args = 0
 423 0000 80B5     		push	{r7, lr}
 424              		.cfi_def_cfa_offset 8
 425              		.cfi_offset 7, -8
 426              		.cfi_offset 14, -4
 427 0002 00AF     		add	r7, sp, #0
 428              		.cfi_def_cfa_register 7
  95:./Core/Src/input_processing.c **** 	if (SEG7_CLOCK[VER_LED] <= 0) {
 429              		.loc 1 95 16
 430 0004 094B     		ldr	r3, .L41
 431 0006 1B68     		ldr	r3, [r3]
 432              		.loc 1 95 5
 433 0008 002B     		cmp	r3, #0
 434 000a 04DC     		bgt	.L38
  96:./Core/Src/input_processing.c **** 		state_update(VER_LED);
 435              		.loc 1 96 3
 436 000c 0020     		movs	r0, #0
 437 000e FFF7FEFF 		bl	state_update
  97:./Core/Src/input_processing.c **** 		vertical_processing();
 438              		.loc 1 97 3
 439 0012 FFF7FEFF 		bl	vertical_processing
 440              	.L38:
  98:./Core/Src/input_processing.c **** 	}
  99:./Core/Src/input_processing.c **** 
 100:./Core/Src/input_processing.c **** 	if (SEG7_CLOCK[HOR_LED] <= 0) {
 441              		.loc 1 100 16
 442 0016 054B     		ldr	r3, .L41
 443 0018 5B68     		ldr	r3, [r3, #4]
 444              		.loc 1 100 5
 445 001a 002B     		cmp	r3, #0
 446 001c 04DC     		bgt	.L40
 101:./Core/Src/input_processing.c **** 		state_update(HOR_LED);
 447              		.loc 1 101 3
 448 001e 0120     		movs	r0, #1
 449 0020 FFF7FEFF 		bl	state_update
 102:./Core/Src/input_processing.c **** 		horizontal_processing();
 450              		.loc 1 102 3
 451 0024 FFF7FEFF 		bl	horizontal_processing
 452              	.L40:
 103:./Core/Src/input_processing.c **** 	}
 104:./Core/Src/input_processing.c **** }
 453              		.loc 1 104 1
 454 0028 00BF     		nop
 455 002a 80BD     		pop	{r7, pc}
 456              	.L42:
 457              		.align	2
 458              	.L41:
 459 002c 00000000 		.word	SEG7_CLOCK
 460              		.cfi_endproc
 461              	.LFE71:
 463              		.section	.text.update_clock,"ax",%progbits
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 11


 464              		.align	1
 465              		.global	update_clock
 466              		.syntax unified
 467              		.thumb
 468              		.thumb_func
 469              		.fpu softvfp
 471              	update_clock:
 472              	.LFB72:
 105:./Core/Src/input_processing.c **** 
 106:./Core/Src/input_processing.c **** void update_clock() {
 473              		.loc 1 106 21
 474              		.cfi_startproc
 475              		@ args = 0, pretend = 0, frame = 0
 476              		@ frame_needed = 1, uses_anonymous_args = 0
 477 0000 80B5     		push	{r7, lr}
 478              		.cfi_def_cfa_offset 8
 479              		.cfi_offset 7, -8
 480              		.cfi_offset 14, -4
 481 0002 00AF     		add	r7, sp, #0
 482              		.cfi_def_cfa_register 7
 107:./Core/Src/input_processing.c **** 	if (timer2_flag == 1) {
 483              		.loc 1 107 18
 484 0004 0C4B     		ldr	r3, .L46
 485 0006 1B68     		ldr	r3, [r3]
 486              		.loc 1 107 5
 487 0008 012B     		cmp	r3, #1
 488 000a 13D1     		bne	.L45
 108:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = SEG7_CLOCK[VER_LED] - TIME_UNIT;
 489              		.loc 1 108 35
 490 000c 0B4B     		ldr	r3, .L46+4
 491 000e 1B68     		ldr	r3, [r3]
 492              		.loc 1 108 45
 493 0010 A3F57A73 		sub	r3, r3, #1000
 494              		.loc 1 108 23
 495 0014 094A     		ldr	r2, .L46+4
 496 0016 1360     		str	r3, [r2]
 109:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = SEG7_CLOCK[HOR_LED] - TIME_UNIT;
 497              		.loc 1 109 35
 498 0018 084B     		ldr	r3, .L46+4
 499 001a 5B68     		ldr	r3, [r3, #4]
 500              		.loc 1 109 45
 501 001c A3F57A73 		sub	r3, r3, #1000
 502              		.loc 1 109 23
 503 0020 064A     		ldr	r2, .L46+4
 504 0022 5360     		str	r3, [r2, #4]
 110:./Core/Src/input_processing.c **** 		check_state();
 505              		.loc 1 110 3
 506 0024 FFF7FEFF 		bl	check_state
 111:./Core/Src/input_processing.c **** 		updateDisplay();
 507              		.loc 1 111 3
 508 0028 FFF7FEFF 		bl	updateDisplay
 112:./Core/Src/input_processing.c **** 		setTimer2(1000);
 509              		.loc 1 112 3
 510 002c 4FF47A70 		mov	r0, #1000
 511 0030 FFF7FEFF 		bl	setTimer2
 512              	.L45:
 113:./Core/Src/input_processing.c **** 	}
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 12


 114:./Core/Src/input_processing.c **** }
 513              		.loc 1 114 1
 514 0034 00BF     		nop
 515 0036 80BD     		pop	{r7, pc}
 516              	.L47:
 517              		.align	2
 518              	.L46:
 519 0038 00000000 		.word	timer2_flag
 520 003c 00000000 		.word	SEG7_CLOCK
 521              		.cfi_endproc
 522              	.LFE72:
 524              		.section	.text.reset,"ax",%progbits
 525              		.align	1
 526              		.global	reset
 527              		.syntax unified
 528              		.thumb
 529              		.thumb_func
 530              		.fpu softvfp
 532              	reset:
 533              	.LFB73:
 115:./Core/Src/input_processing.c **** 
 116:./Core/Src/input_processing.c **** void reset() {
 534              		.loc 1 116 14
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 0
 537              		@ frame_needed = 1, uses_anonymous_args = 0
 538              		@ link register save eliminated.
 539 0000 80B4     		push	{r7}
 540              		.cfi_def_cfa_offset 4
 541              		.cfi_offset 7, -4
 542 0002 00AF     		add	r7, sp, #0
 543              		.cfi_def_cfa_register 7
 117:./Core/Src/input_processing.c **** 	LED_TIME[RED_STATUS] = NORMAL_RED ;
 544              		.loc 1 117 23
 545 0004 114B     		ldr	r3, .L49
 546 0006 42F21072 		movw	r2, #10000
 547 000a 1A60     		str	r2, [r3]
 118:./Core/Src/input_processing.c **** 	LED_TIME[YELLOW_STATUS] = NORMAL_YELLOW;
 548              		.loc 1 118 26
 549 000c 0F4B     		ldr	r3, .L49
 550 000e 40F6B832 		movw	r2, #3000
 551 0012 5A60     		str	r2, [r3, #4]
 119:./Core/Src/input_processing.c **** 	LED_TIME[GREEN_STATUS] = NORMAL_GREEN;
 552              		.loc 1 119 25
 553 0014 0D4B     		ldr	r3, .L49
 554 0016 41F65832 		movw	r2, #7000
 555 001a 9A60     		str	r2, [r3, #8]
 120:./Core/Src/input_processing.c **** 	CURRENT_STATE[VER_LED] = RED_STATUS;
 556              		.loc 1 120 25
 557 001c 0C4B     		ldr	r3, .L49+4
 558 001e 0022     		movs	r2, #0
 559 0020 1A60     		str	r2, [r3]
 121:./Core/Src/input_processing.c **** 	CURRENT_STATE[HOR_LED] = GREEN_STATUS;
 560              		.loc 1 121 25
 561 0022 0B4B     		ldr	r3, .L49+4
 562 0024 0222     		movs	r2, #2
 563 0026 5A60     		str	r2, [r3, #4]
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 13


 122:./Core/Src/input_processing.c **** 	SEG7_CLOCK[VER_LED] = LED_TIME[CURRENT_STATE[VER_LED]];
 564              		.loc 1 122 46
 565 0028 094B     		ldr	r3, .L49+4
 566 002a 1B68     		ldr	r3, [r3]
 567              		.loc 1 122 32
 568 002c 074A     		ldr	r2, .L49
 569 002e 52F82330 		ldr	r3, [r2, r3, lsl #2]
 570              		.loc 1 122 22
 571 0032 084A     		ldr	r2, .L49+8
 572 0034 1360     		str	r3, [r2]
 123:./Core/Src/input_processing.c **** 	SEG7_CLOCK[HOR_LED] = LED_TIME[CURRENT_STATE[HOR_LED]];
 573              		.loc 1 123 46
 574 0036 064B     		ldr	r3, .L49+4
 575 0038 5B68     		ldr	r3, [r3, #4]
 576              		.loc 1 123 32
 577 003a 044A     		ldr	r2, .L49
 578 003c 52F82330 		ldr	r3, [r2, r3, lsl #2]
 579              		.loc 1 123 22
 580 0040 044A     		ldr	r2, .L49+8
 581 0042 5360     		str	r3, [r2, #4]
 124:./Core/Src/input_processing.c **** }
 582              		.loc 1 124 1
 583 0044 00BF     		nop
 584 0046 BD46     		mov	sp, r7
 585              		.cfi_def_cfa_register 13
 586              		@ sp needed
 587 0048 80BC     		pop	{r7}
 588              		.cfi_restore 7
 589              		.cfi_def_cfa_offset 0
 590 004a 7047     		bx	lr
 591              	.L50:
 592              		.align	2
 593              	.L49:
 594 004c 00000000 		.word	LED_TIME
 595 0050 00000000 		.word	CURRENT_STATE
 596 0054 00000000 		.word	SEG7_CLOCK
 597              		.cfi_endproc
 598              	.LFE73:
 600              		.section	.text.confirm_action,"ax",%progbits
 601              		.align	1
 602              		.global	confirm_action
 603              		.syntax unified
 604              		.thumb
 605              		.thumb_func
 606              		.fpu softvfp
 608              	confirm_action:
 609              	.LFB74:
 125:./Core/Src/input_processing.c **** 
 126:./Core/Src/input_processing.c **** 
 127:./Core/Src/input_processing.c **** void confirm_action(int mode, int time_inc) {
 610              		.loc 1 127 45
 611              		.cfi_startproc
 612              		@ args = 0, pretend = 0, frame = 8
 613              		@ frame_needed = 1, uses_anonymous_args = 0
 614              		@ link register save eliminated.
 615 0000 80B4     		push	{r7}
 616              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 14


 617              		.cfi_offset 7, -4
 618 0002 83B0     		sub	sp, sp, #12
 619              		.cfi_def_cfa_offset 16
 620 0004 00AF     		add	r7, sp, #0
 621              		.cfi_def_cfa_register 7
 622 0006 7860     		str	r0, [r7, #4]
 623 0008 3960     		str	r1, [r7]
 128:./Core/Src/input_processing.c **** //	HAL_UART_Transmit(&huart2, (uint8_t*)str, sprintf(str, "!7SEG:%d#\r\n",TIMES_INC), 1000);
 129:./Core/Src/input_processing.c **** 	switch (mode) {
 624              		.loc 1 129 2
 625 000a 7B68     		ldr	r3, [r7, #4]
 626 000c 022B     		cmp	r3, #2
 627 000e 1FD0     		beq	.L52
 628 0010 7B68     		ldr	r3, [r7, #4]
 629 0012 022B     		cmp	r3, #2
 630 0014 27DC     		bgt	.L57
 631 0016 7B68     		ldr	r3, [r7, #4]
 632 0018 002B     		cmp	r3, #0
 633 001a 03D0     		beq	.L54
 634 001c 7B68     		ldr	r3, [r7, #4]
 635 001e 012B     		cmp	r3, #1
 636 0020 0BD0     		beq	.L55
 130:./Core/Src/input_processing.c **** 	case 0: // Inc red time mode
 131:./Core/Src/input_processing.c **** 		LED_TIME[RED_STATUS] = LED_TIME[RED_STATUS] + (time_inc * TIME_UNIT);
 132:./Core/Src/input_processing.c **** 		break;
 133:./Core/Src/input_processing.c **** 	case 1: // Inc yellow time mode
 134:./Core/Src/input_processing.c **** 		LED_TIME[YELLOW_STATUS] = LED_TIME[YELLOW_STATUS] + (time_inc * TIME_UNIT);
 135:./Core/Src/input_processing.c **** 		break;
 136:./Core/Src/input_processing.c **** 	case 2: // Inc green time
 137:./Core/Src/input_processing.c **** 		LED_TIME [GREEN_STATUS] = LED_TIME[GREEN_STATUS] + (time_inc * TIME_UNIT);
 138:./Core/Src/input_processing.c **** 		break;
 139:./Core/Src/input_processing.c **** 	default:
 140:./Core/Src/input_processing.c **** 		break;
 637              		.loc 1 140 3
 638 0022 20E0     		b	.L57
 639              	.L54:
 131:./Core/Src/input_processing.c **** 		break;
 640              		.loc 1 131 34
 641 0024 134B     		ldr	r3, .L58
 642 0026 1A68     		ldr	r2, [r3]
 131:./Core/Src/input_processing.c **** 		break;
 643              		.loc 1 131 59
 644 0028 3B68     		ldr	r3, [r7]
 645 002a 4FF47A71 		mov	r1, #1000
 646 002e 01FB03F3 		mul	r3, r1, r3
 131:./Core/Src/input_processing.c **** 		break;
 647              		.loc 1 131 47
 648 0032 1344     		add	r3, r3, r2
 131:./Core/Src/input_processing.c **** 		break;
 649              		.loc 1 131 24
 650 0034 0F4A     		ldr	r2, .L58
 651 0036 1360     		str	r3, [r2]
 132:./Core/Src/input_processing.c **** 	case 1: // Inc yellow time mode
 652              		.loc 1 132 3
 653 0038 16E0     		b	.L56
 654              	.L55:
 134:./Core/Src/input_processing.c **** 		break;
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 15


 655              		.loc 1 134 37
 656 003a 0E4B     		ldr	r3, .L58
 657 003c 5A68     		ldr	r2, [r3, #4]
 134:./Core/Src/input_processing.c **** 		break;
 658              		.loc 1 134 65
 659 003e 3B68     		ldr	r3, [r7]
 660 0040 4FF47A71 		mov	r1, #1000
 661 0044 01FB03F3 		mul	r3, r1, r3
 134:./Core/Src/input_processing.c **** 		break;
 662              		.loc 1 134 53
 663 0048 1344     		add	r3, r3, r2
 134:./Core/Src/input_processing.c **** 		break;
 664              		.loc 1 134 27
 665 004a 0A4A     		ldr	r2, .L58
 666 004c 5360     		str	r3, [r2, #4]
 135:./Core/Src/input_processing.c **** 	case 2: // Inc green time
 667              		.loc 1 135 3
 668 004e 0BE0     		b	.L56
 669              	.L52:
 137:./Core/Src/input_processing.c **** 		break;
 670              		.loc 1 137 37
 671 0050 084B     		ldr	r3, .L58
 672 0052 9A68     		ldr	r2, [r3, #8]
 137:./Core/Src/input_processing.c **** 		break;
 673              		.loc 1 137 64
 674 0054 3B68     		ldr	r3, [r7]
 675 0056 4FF47A71 		mov	r1, #1000
 676 005a 01FB03F3 		mul	r3, r1, r3
 137:./Core/Src/input_processing.c **** 		break;
 677              		.loc 1 137 52
 678 005e 1344     		add	r3, r3, r2
 137:./Core/Src/input_processing.c **** 		break;
 679              		.loc 1 137 27
 680 0060 044A     		ldr	r2, .L58
 681 0062 9360     		str	r3, [r2, #8]
 138:./Core/Src/input_processing.c **** 	default:
 682              		.loc 1 138 3
 683 0064 00E0     		b	.L56
 684              	.L57:
 685              		.loc 1 140 3
 686 0066 00BF     		nop
 687              	.L56:
 141:./Core/Src/input_processing.c **** 	}
 142:./Core/Src/input_processing.c **** 
 143:./Core/Src/input_processing.c **** }
 688              		.loc 1 143 1
 689 0068 00BF     		nop
 690 006a 0C37     		adds	r7, r7, #12
 691              		.cfi_def_cfa_offset 4
 692 006c BD46     		mov	sp, r7
 693              		.cfi_def_cfa_register 13
 694              		@ sp needed
 695 006e 80BC     		pop	{r7}
 696              		.cfi_restore 7
 697              		.cfi_def_cfa_offset 0
 698 0070 7047     		bx	lr
 699              	.L59:
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 16


 700 0072 00BF     		.align	2
 701              	.L58:
 702 0074 00000000 		.word	LED_TIME
 703              		.cfi_endproc
 704              	.LFE74:
 706              		.section	.text.state_handle,"ax",%progbits
 707              		.align	1
 708              		.global	state_handle
 709              		.syntax unified
 710              		.thumb
 711              		.thumb_func
 712              		.fpu softvfp
 714              	state_handle:
 715              	.LFB75:
 144:./Core/Src/input_processing.c **** 
 145:./Core/Src/input_processing.c **** void state_handle() {
 716              		.loc 1 145 21
 717              		.cfi_startproc
 718              		@ args = 0, pretend = 0, frame = 0
 719              		@ frame_needed = 1, uses_anonymous_args = 0
 720 0000 80B5     		push	{r7, lr}
 721              		.cfi_def_cfa_offset 8
 722              		.cfi_offset 7, -8
 723              		.cfi_offset 14, -4
 724 0002 00AF     		add	r7, sp, #0
 725              		.cfi_def_cfa_register 7
 146:./Core/Src/input_processing.c **** 	switch (index_mode) {
 726              		.loc 1 146 2
 727 0004 484B     		ldr	r3, .L70
 728 0006 1B68     		ldr	r3, [r3]
 729 0008 022B     		cmp	r3, #2
 730 000a 5DD0     		beq	.L61
 731 000c 022B     		cmp	r3, #2
 732 000e 00F38780 		bgt	.L69
 733 0012 002B     		cmp	r3, #0
 734 0014 02D0     		beq	.L63
 735 0016 012B     		cmp	r3, #1
 736 0018 2CD0     		beq	.L64
 147:./Core/Src/input_processing.c **** 	case 0:							//RED MODE
 148:./Core/Src/input_processing.c **** 		if (timer1_flag == 1) {
 149:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin, 0);
 150:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin);
 151:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin, 0);
 152:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin);
 153:./Core/Src/input_processing.c **** 			setTimer1(500);
 154:./Core/Src/input_processing.c **** 		}
 155:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = LED_TIME[0] + TIMES_INC * TIME_UNIT;
 156:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 157:./Core/Src/input_processing.c **** 		updateDisplay();
 158:./Core/Src/input_processing.c **** 		break;
 159:./Core/Src/input_processing.c **** 	case 1:							//YELLOW MODE
 160:./Core/Src/input_processing.c **** 		if (timer1_flag == 1) {
 161:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin);
 162:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin);
 163:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin);
 164:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin);
 165:./Core/Src/input_processing.c **** 			setTimer1(500);
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 17


 166:./Core/Src/input_processing.c **** 		}
 167:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = LED_TIME[1] + TIMES_INC * TIME_UNIT;
 168:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 169:./Core/Src/input_processing.c **** 		updateDisplay();
 170:./Core/Src/input_processing.c **** 		break;
 171:./Core/Src/input_processing.c **** 	case 2:							//GREEN MODE
 172:./Core/Src/input_processing.c **** 		if (timer1_flag == 1) {
 173:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin, 0);
 174:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin);
 175:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin, 0);
 176:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin);
 177:./Core/Src/input_processing.c **** 			setTimer1(500);
 178:./Core/Src/input_processing.c **** 		}
 179:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = LED_TIME[2] + TIMES_INC * TIME_UNIT;
 180:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 181:./Core/Src/input_processing.c **** 		updateDisplay();
 182:./Core/Src/input_processing.c **** 		break;
 183:./Core/Src/input_processing.c **** 	default:
 184:./Core/Src/input_processing.c **** 		break;
 737              		.loc 1 184 3
 738 001a 81E0     		b	.L69
 739              	.L63:
 148:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin, 0);
 740              		.loc 1 148 19
 741 001c 434B     		ldr	r3, .L70+4
 742 001e 1B68     		ldr	r3, [r3]
 148:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin, 0);
 743              		.loc 1 148 6
 744 0020 012B     		cmp	r3, #1
 745 0022 16D1     		bne	.L65
 149:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin);
 746              		.loc 1 149 4
 747 0024 0022     		movs	r2, #0
 748 0026 0821     		movs	r1, #8
 749 0028 4148     		ldr	r0, .L70+8
 750 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 150:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin, 0);
 751              		.loc 1 150 4
 752 002e 4FF48061 		mov	r1, #1024
 753 0032 4048     		ldr	r0, .L70+12
 754 0034 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 151:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin);
 755              		.loc 1 151 4
 756 0038 0022     		movs	r2, #0
 757 003a 1021     		movs	r1, #16
 758 003c 3C48     		ldr	r0, .L70+8
 759 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 152:./Core/Src/input_processing.c **** 			setTimer1(500);
 760              		.loc 1 152 4
 761 0042 2021     		movs	r1, #32
 762 0044 3A48     		ldr	r0, .L70+8
 763 0046 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 153:./Core/Src/input_processing.c **** 		}
 764              		.loc 1 153 4
 765 004a 4FF4FA70 		mov	r0, #500
 766 004e FFF7FEFF 		bl	setTimer1
 767              	.L65:
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 18


 155:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 768              		.loc 1 155 33
 769 0052 394B     		ldr	r3, .L70+16
 770 0054 1A68     		ldr	r2, [r3]
 155:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 771              		.loc 1 155 49
 772 0056 394B     		ldr	r3, .L70+20
 773 0058 1B68     		ldr	r3, [r3]
 774 005a 4FF47A71 		mov	r1, #1000
 775 005e 01FB03F3 		mul	r3, r1, r3
 155:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 776              		.loc 1 155 37
 777 0062 1344     		add	r3, r3, r2
 155:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 778              		.loc 1 155 23
 779 0064 364A     		ldr	r2, .L70+24
 780 0066 1360     		str	r3, [r2]
 156:./Core/Src/input_processing.c **** 		updateDisplay();
 781              		.loc 1 156 23
 782 0068 354B     		ldr	r3, .L70+24
 783 006a 0022     		movs	r2, #0
 784 006c 5A60     		str	r2, [r3, #4]
 157:./Core/Src/input_processing.c **** 		break;
 785              		.loc 1 157 3
 786 006e FFF7FEFF 		bl	updateDisplay
 158:./Core/Src/input_processing.c **** 	case 1:							//YELLOW MODE
 787              		.loc 1 158 3
 788 0072 56E0     		b	.L66
 789              	.L64:
 160:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin);
 790              		.loc 1 160 19
 791 0074 2D4B     		ldr	r3, .L70+4
 792 0076 1B68     		ldr	r3, [r3]
 160:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin);
 793              		.loc 1 160 6
 794 0078 012B     		cmp	r3, #1
 795 007a 14D1     		bne	.L67
 161:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin);
 796              		.loc 1 161 4
 797 007c 4FF48061 		mov	r1, #1024
 798 0080 2C48     		ldr	r0, .L70+12
 799 0082 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 162:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin);
 800              		.loc 1 162 4
 801 0086 0821     		movs	r1, #8
 802 0088 2948     		ldr	r0, .L70+8
 803 008a FFF7FEFF 		bl	HAL_GPIO_TogglePin
 163:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin);
 804              		.loc 1 163 4
 805 008e 2021     		movs	r1, #32
 806 0090 2748     		ldr	r0, .L70+8
 807 0092 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 164:./Core/Src/input_processing.c **** 			setTimer1(500);
 808              		.loc 1 164 4
 809 0096 1021     		movs	r1, #16
 810 0098 2548     		ldr	r0, .L70+8
 811 009a FFF7FEFF 		bl	HAL_GPIO_TogglePin
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 19


 165:./Core/Src/input_processing.c **** 		}
 812              		.loc 1 165 4
 813 009e 4FF4FA70 		mov	r0, #500
 814 00a2 FFF7FEFF 		bl	setTimer1
 815              	.L67:
 167:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 816              		.loc 1 167 33
 817 00a6 244B     		ldr	r3, .L70+16
 818 00a8 5A68     		ldr	r2, [r3, #4]
 167:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 819              		.loc 1 167 49
 820 00aa 244B     		ldr	r3, .L70+20
 821 00ac 1B68     		ldr	r3, [r3]
 822 00ae 4FF47A71 		mov	r1, #1000
 823 00b2 01FB03F3 		mul	r3, r1, r3
 167:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 824              		.loc 1 167 37
 825 00b6 1344     		add	r3, r3, r2
 167:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 826              		.loc 1 167 23
 827 00b8 214A     		ldr	r2, .L70+24
 828 00ba 1360     		str	r3, [r2]
 168:./Core/Src/input_processing.c **** 		updateDisplay();
 829              		.loc 1 168 23
 830 00bc 204B     		ldr	r3, .L70+24
 831 00be 0022     		movs	r2, #0
 832 00c0 5A60     		str	r2, [r3, #4]
 169:./Core/Src/input_processing.c **** 		break;
 833              		.loc 1 169 3
 834 00c2 FFF7FEFF 		bl	updateDisplay
 170:./Core/Src/input_processing.c **** 	case 2:							//GREEN MODE
 835              		.loc 1 170 3
 836 00c6 2CE0     		b	.L66
 837              	.L61:
 172:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin, 0);
 838              		.loc 1 172 19
 839 00c8 184B     		ldr	r3, .L70+4
 840 00ca 1B68     		ldr	r3, [r3]
 172:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_1_1_GPIO_Port, Traffic_1_1_Pin, 0);
 841              		.loc 1 172 6
 842 00cc 012B     		cmp	r3, #1
 843 00ce 16D1     		bne	.L68
 173:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_1_2_GPIO_Port, Traffic_1_2_Pin);
 844              		.loc 1 173 4
 845 00d0 0022     		movs	r2, #0
 846 00d2 4FF48061 		mov	r1, #1024
 847 00d6 1748     		ldr	r0, .L70+12
 848 00d8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 174:./Core/Src/input_processing.c **** 			HAL_GPIO_WritePin(Traffic_2_1_GPIO_Port, Traffic_2_1_Pin, 0);
 849              		.loc 1 174 4
 850 00dc 0821     		movs	r1, #8
 851 00de 1448     		ldr	r0, .L70+8
 852 00e0 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 175:./Core/Src/input_processing.c **** 			HAL_GPIO_TogglePin(Traffic_2_2_GPIO_Port, Traffic_2_2_Pin);
 853              		.loc 1 175 4
 854 00e4 0022     		movs	r2, #0
 855 00e6 2021     		movs	r1, #32
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 20


 856 00e8 1148     		ldr	r0, .L70+8
 857 00ea FFF7FEFF 		bl	HAL_GPIO_WritePin
 176:./Core/Src/input_processing.c **** 			setTimer1(500);
 858              		.loc 1 176 4
 859 00ee 1021     		movs	r1, #16
 860 00f0 0F48     		ldr	r0, .L70+8
 861 00f2 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 177:./Core/Src/input_processing.c **** 		}
 862              		.loc 1 177 4
 863 00f6 4FF4FA70 		mov	r0, #500
 864 00fa FFF7FEFF 		bl	setTimer1
 865              	.L68:
 179:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 866              		.loc 1 179 33
 867 00fe 0E4B     		ldr	r3, .L70+16
 868 0100 9A68     		ldr	r2, [r3, #8]
 179:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 869              		.loc 1 179 49
 870 0102 0E4B     		ldr	r3, .L70+20
 871 0104 1B68     		ldr	r3, [r3]
 872 0106 4FF47A71 		mov	r1, #1000
 873 010a 01FB03F3 		mul	r3, r1, r3
 179:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 874              		.loc 1 179 37
 875 010e 1344     		add	r3, r3, r2
 179:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = 0;
 876              		.loc 1 179 23
 877 0110 0B4A     		ldr	r2, .L70+24
 878 0112 1360     		str	r3, [r2]
 180:./Core/Src/input_processing.c **** 		updateDisplay();
 879              		.loc 1 180 23
 880 0114 0A4B     		ldr	r3, .L70+24
 881 0116 0022     		movs	r2, #0
 882 0118 5A60     		str	r2, [r3, #4]
 181:./Core/Src/input_processing.c **** 		break;
 883              		.loc 1 181 3
 884 011a FFF7FEFF 		bl	updateDisplay
 182:./Core/Src/input_processing.c **** 	default:
 885              		.loc 1 182 3
 886 011e 00E0     		b	.L66
 887              	.L69:
 888              		.loc 1 184 3
 889 0120 00BF     		nop
 890              	.L66:
 185:./Core/Src/input_processing.c **** 	}
 186:./Core/Src/input_processing.c **** }
 891              		.loc 1 186 1
 892 0122 00BF     		nop
 893 0124 80BD     		pop	{r7, pc}
 894              	.L71:
 895 0126 00BF     		.align	2
 896              	.L70:
 897 0128 00000000 		.word	index_mode
 898 012c 00000000 		.word	timer1_flag
 899 0130 000C0140 		.word	1073810432
 900 0134 00080140 		.word	1073809408
 901 0138 00000000 		.word	LED_TIME
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 21


 902 013c 00000000 		.word	TIMES_INC
 903 0140 00000000 		.word	SEG7_CLOCK
 904              		.cfi_endproc
 905              	.LFE75:
 907              		.section	.text.traffic_processing,"ax",%progbits
 908              		.align	1
 909              		.global	traffic_processing
 910              		.syntax unified
 911              		.thumb
 912              		.thumb_func
 913              		.fpu softvfp
 915              	traffic_processing:
 916              	.LFB76:
 187:./Core/Src/input_processing.c **** 
 188:./Core/Src/input_processing.c **** void traffic_processing() {
 917              		.loc 1 188 27
 918              		.cfi_startproc
 919              		@ args = 0, pretend = 0, frame = 0
 920              		@ frame_needed = 1, uses_anonymous_args = 0
 921 0000 80B5     		push	{r7, lr}
 922              		.cfi_def_cfa_offset 8
 923              		.cfi_offset 7, -8
 924              		.cfi_offset 14, -4
 925 0002 00AF     		add	r7, sp, #0
 926              		.cfi_def_cfa_register 7
 189:./Core/Src/input_processing.c **** 	switch (status) {
 927              		.loc 1 189 2
 928 0004 184B     		ldr	r3, .L79
 929 0006 1B68     		ldr	r3, [r3]
 930 0008 022B     		cmp	r3, #2
 931 000a 27D0     		beq	.L73
 932 000c 022B     		cmp	r3, #2
 933 000e 28DC     		bgt	.L78
 934 0010 002B     		cmp	r3, #0
 935 0012 02D0     		beq	.L75
 936 0014 012B     		cmp	r3, #1
 937 0016 1ED0     		beq	.L76
 190:./Core/Src/input_processing.c **** 	case 0: //INIT
 191:./Core/Src/input_processing.c **** 		CURRENT_STATE[VER_LED] = RED_STATUS;
 192:./Core/Src/input_processing.c **** 		CURRENT_STATE[HOR_LED] = GREEN_STATUS;
 193:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = LED_TIME[CURRENT_STATE[VER_LED]];
 194:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = LED_TIME[CURRENT_STATE[HOR_LED]];
 195:./Core/Src/input_processing.c **** 		updateDisplay();
 196:./Core/Src/input_processing.c **** 		vertical_processing();
 197:./Core/Src/input_processing.c **** 		horizontal_processing();
 198:./Core/Src/input_processing.c **** 		status = 1;
 199:./Core/Src/input_processing.c **** 		break;
 200:./Core/Src/input_processing.c **** 	case 1: // Normal state
 201:./Core/Src/input_processing.c **** 		update_clock();
 202:./Core/Src/input_processing.c **** 		break;
 203:./Core/Src/input_processing.c **** 	case 2: // Modify state
 204:./Core/Src/input_processing.c **** 		state_handle();
 205:./Core/Src/input_processing.c **** 		break;
 206:./Core/Src/input_processing.c **** 	default:
 207:./Core/Src/input_processing.c **** 		break;
 938              		.loc 1 207 3
 939 0018 23E0     		b	.L78
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 22


 940              	.L75:
 191:./Core/Src/input_processing.c **** 		CURRENT_STATE[HOR_LED] = GREEN_STATUS;
 941              		.loc 1 191 26
 942 001a 144B     		ldr	r3, .L79+4
 943 001c 0022     		movs	r2, #0
 944 001e 1A60     		str	r2, [r3]
 192:./Core/Src/input_processing.c **** 		SEG7_CLOCK[VER_LED] = LED_TIME[CURRENT_STATE[VER_LED]];
 945              		.loc 1 192 26
 946 0020 124B     		ldr	r3, .L79+4
 947 0022 0222     		movs	r2, #2
 948 0024 5A60     		str	r2, [r3, #4]
 193:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = LED_TIME[CURRENT_STATE[HOR_LED]];
 949              		.loc 1 193 47
 950 0026 114B     		ldr	r3, .L79+4
 951 0028 1B68     		ldr	r3, [r3]
 193:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = LED_TIME[CURRENT_STATE[HOR_LED]];
 952              		.loc 1 193 33
 953 002a 114A     		ldr	r2, .L79+8
 954 002c 52F82330 		ldr	r3, [r2, r3, lsl #2]
 193:./Core/Src/input_processing.c **** 		SEG7_CLOCK[HOR_LED] = LED_TIME[CURRENT_STATE[HOR_LED]];
 955              		.loc 1 193 23
 956 0030 104A     		ldr	r2, .L79+12
 957 0032 1360     		str	r3, [r2]
 194:./Core/Src/input_processing.c **** 		updateDisplay();
 958              		.loc 1 194 47
 959 0034 0D4B     		ldr	r3, .L79+4
 960 0036 5B68     		ldr	r3, [r3, #4]
 194:./Core/Src/input_processing.c **** 		updateDisplay();
 961              		.loc 1 194 33
 962 0038 0D4A     		ldr	r2, .L79+8
 963 003a 52F82330 		ldr	r3, [r2, r3, lsl #2]
 194:./Core/Src/input_processing.c **** 		updateDisplay();
 964              		.loc 1 194 23
 965 003e 0D4A     		ldr	r2, .L79+12
 966 0040 5360     		str	r3, [r2, #4]
 195:./Core/Src/input_processing.c **** 		vertical_processing();
 967              		.loc 1 195 3
 968 0042 FFF7FEFF 		bl	updateDisplay
 196:./Core/Src/input_processing.c **** 		horizontal_processing();
 969              		.loc 1 196 3
 970 0046 FFF7FEFF 		bl	vertical_processing
 197:./Core/Src/input_processing.c **** 		status = 1;
 971              		.loc 1 197 3
 972 004a FFF7FEFF 		bl	horizontal_processing
 198:./Core/Src/input_processing.c **** 		break;
 973              		.loc 1 198 10
 974 004e 064B     		ldr	r3, .L79
 975 0050 0122     		movs	r2, #1
 976 0052 1A60     		str	r2, [r3]
 199:./Core/Src/input_processing.c **** 	case 1: // Normal state
 977              		.loc 1 199 3
 978 0054 06E0     		b	.L77
 979              	.L76:
 201:./Core/Src/input_processing.c **** 		break;
 980              		.loc 1 201 3
 981 0056 FFF7FEFF 		bl	update_clock
 202:./Core/Src/input_processing.c **** 	case 2: // Modify state
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 23


 982              		.loc 1 202 3
 983 005a 03E0     		b	.L77
 984              	.L73:
 204:./Core/Src/input_processing.c **** 		break;
 985              		.loc 1 204 3
 986 005c FFF7FEFF 		bl	state_handle
 205:./Core/Src/input_processing.c **** 	default:
 987              		.loc 1 205 3
 988 0060 00E0     		b	.L77
 989              	.L78:
 990              		.loc 1 207 3
 991 0062 00BF     		nop
 992              	.L77:
 208:./Core/Src/input_processing.c **** 	}
 209:./Core/Src/input_processing.c **** }
 993              		.loc 1 209 1
 994 0064 00BF     		nop
 995 0066 80BD     		pop	{r7, pc}
 996              	.L80:
 997              		.align	2
 998              	.L79:
 999 0068 00000000 		.word	status
 1000 006c 00000000 		.word	CURRENT_STATE
 1001 0070 00000000 		.word	LED_TIME
 1002 0074 00000000 		.word	SEG7_CLOCK
 1003              		.cfi_endproc
 1004              	.LFE76:
 1006              		.section	.text.input_processing,"ax",%progbits
 1007              		.align	1
 1008              		.global	input_processing
 1009              		.syntax unified
 1010              		.thumb
 1011              		.thumb_func
 1012              		.fpu softvfp
 1014              	input_processing:
 1015              	.LFB77:
 210:./Core/Src/input_processing.c **** 
 211:./Core/Src/input_processing.c **** void input_processing() {
 1016              		.loc 1 211 25
 1017              		.cfi_startproc
 1018              		@ args = 0, pretend = 0, frame = 0
 1019              		@ frame_needed = 1, uses_anonymous_args = 0
 1020 0000 80B5     		push	{r7, lr}
 1021              		.cfi_def_cfa_offset 8
 1022              		.cfi_offset 7, -8
 1023              		.cfi_offset 14, -4
 1024 0002 00AF     		add	r7, sp, #0
 1025              		.cfi_def_cfa_register 7
 212:./Core/Src/input_processing.c **** 	// Switch button
 213:./Core/Src/input_processing.c **** 	if (is_button_pressed(0)) {
 1026              		.loc 1 213 6
 1027 0004 0020     		movs	r0, #0
 1028 0006 FFF7FEFF 		bl	is_button_pressed
 1029 000a 0346     		mov	r3, r0
 1030              		.loc 1 213 5
 1031 000c 002B     		cmp	r3, #0
 1032 000e 19D0     		beq	.L82
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 24


 214:./Core/Src/input_processing.c **** 		clear_vertical();
 1033              		.loc 1 214 3
 1034 0010 FFF7FEFF 		bl	clear_vertical
 215:./Core/Src/input_processing.c **** 		clear_horizontal();
 1035              		.loc 1 215 3
 1036 0014 FFF7FEFF 		bl	clear_horizontal
 216:./Core/Src/input_processing.c **** 		status = 2;
 1037              		.loc 1 216 10
 1038 0018 284B     		ldr	r3, .L88
 1039 001a 0222     		movs	r2, #2
 1040 001c 1A60     		str	r2, [r3]
 217:./Core/Src/input_processing.c **** 		index_mode = (index_mode + 1);
 1041              		.loc 1 217 28
 1042 001e 284B     		ldr	r3, .L88+4
 1043 0020 1B68     		ldr	r3, [r3]
 1044 0022 0133     		adds	r3, r3, #1
 1045              		.loc 1 217 14
 1046 0024 264A     		ldr	r2, .L88+4
 1047 0026 1360     		str	r3, [r2]
 218:./Core/Src/input_processing.c **** 		TIMES_INC = 0;
 1048              		.loc 1 218 13
 1049 0028 264B     		ldr	r3, .L88+8
 1050 002a 0022     		movs	r2, #0
 1051 002c 1A60     		str	r2, [r3]
 219:./Core/Src/input_processing.c **** 		if (index_mode >= 3) {
 1052              		.loc 1 219 18
 1053 002e 244B     		ldr	r3, .L88+4
 1054 0030 1B68     		ldr	r3, [r3]
 1055              		.loc 1 219 6
 1056 0032 022B     		cmp	r3, #2
 1057 0034 06DD     		ble	.L82
 220:./Core/Src/input_processing.c **** 			status = 0;
 1058              		.loc 1 220 11
 1059 0036 214B     		ldr	r3, .L88
 1060 0038 0022     		movs	r2, #0
 1061 003a 1A60     		str	r2, [r3]
 221:./Core/Src/input_processing.c **** 			index_mode = -1;
 1062              		.loc 1 221 15
 1063 003c 204B     		ldr	r3, .L88+4
 1064 003e 4FF0FF32 		mov	r2, #-1
 1065 0042 1A60     		str	r2, [r3]
 1066              	.L82:
 222:./Core/Src/input_processing.c **** 		}
 223:./Core/Src/input_processing.c **** 	}
 224:./Core/Src/input_processing.c **** 
 225:./Core/Src/input_processing.c **** 	// Add button
 226:./Core/Src/input_processing.c **** 	if (is_button_pressed(1) && index_mode != -1) {
 1067              		.loc 1 226 6
 1068 0044 0120     		movs	r0, #1
 1069 0046 FFF7FEFF 		bl	is_button_pressed
 1070 004a 0346     		mov	r3, r0
 1071              		.loc 1 226 5
 1072 004c 002B     		cmp	r3, #0
 1073 004e 09D0     		beq	.L83
 1074              		.loc 1 226 41 discriminator 1
 1075 0050 1B4B     		ldr	r3, .L88+4
 1076 0052 1B68     		ldr	r3, [r3]
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 25


 1077              		.loc 1 226 27 discriminator 1
 1078 0054 B3F1FF3F 		cmp	r3, #-1
 1079 0058 04D0     		beq	.L83
 227:./Core/Src/input_processing.c **** 		TIMES_INC++;
 1080              		.loc 1 227 12
 1081 005a 1A4B     		ldr	r3, .L88+8
 1082 005c 1B68     		ldr	r3, [r3]
 1083 005e 0133     		adds	r3, r3, #1
 1084 0060 184A     		ldr	r2, .L88+8
 1085 0062 1360     		str	r3, [r2]
 1086              	.L83:
 228:./Core/Src/input_processing.c **** 	}
 229:./Core/Src/input_processing.c **** 
 230:./Core/Src/input_processing.c **** 	// Confirm button
 231:./Core/Src/input_processing.c **** 	if (is_button_pressed(2) && index_mode != -1) {
 1087              		.loc 1 231 6
 1088 0064 0220     		movs	r0, #2
 1089 0066 FFF7FEFF 		bl	is_button_pressed
 1090 006a 0346     		mov	r3, r0
 1091              		.loc 1 231 5
 1092 006c 002B     		cmp	r3, #0
 1093 006e 1AD0     		beq	.L84
 1094              		.loc 1 231 41 discriminator 1
 1095 0070 134B     		ldr	r3, .L88+4
 1096 0072 1B68     		ldr	r3, [r3]
 1097              		.loc 1 231 27 discriminator 1
 1098 0074 B3F1FF3F 		cmp	r3, #-1
 1099 0078 15D0     		beq	.L84
 232:./Core/Src/input_processing.c **** 		if (TIMES_INC != 0) {
 1100              		.loc 1 232 17
 1101 007a 124B     		ldr	r3, .L88+8
 1102 007c 1B68     		ldr	r3, [r3]
 1103              		.loc 1 232 6
 1104 007e 002B     		cmp	r3, #0
 1105 0080 07D0     		beq	.L85
 233:./Core/Src/input_processing.c **** 			confirm_action(index_mode, TIMES_INC);
 1106              		.loc 1 233 4
 1107 0082 0F4B     		ldr	r3, .L88+4
 1108 0084 1B68     		ldr	r3, [r3]
 1109 0086 0F4A     		ldr	r2, .L88+8
 1110 0088 1268     		ldr	r2, [r2]
 1111 008a 1146     		mov	r1, r2
 1112 008c 1846     		mov	r0, r3
 1113 008e FFF7FEFF 		bl	confirm_action
 1114              	.L85:
 234:./Core/Src/input_processing.c **** 		}
 235:./Core/Src/input_processing.c **** 		TIMES_INC = 0;
 1115              		.loc 1 235 13
 1116 0092 0C4B     		ldr	r3, .L88+8
 1117 0094 0022     		movs	r2, #0
 1118 0096 1A60     		str	r2, [r3]
 236:./Core/Src/input_processing.c **** 		index_mode = -1;
 1119              		.loc 1 236 14
 1120 0098 094B     		ldr	r3, .L88+4
 1121 009a 4FF0FF32 		mov	r2, #-1
 1122 009e 1A60     		str	r2, [r3]
 237:./Core/Src/input_processing.c **** 		status = 0;
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 26


 1123              		.loc 1 237 10
 1124 00a0 064B     		ldr	r3, .L88
 1125 00a2 0022     		movs	r2, #0
 1126 00a4 1A60     		str	r2, [r3]
 1127              	.L84:
 238:./Core/Src/input_processing.c **** 	}
 239:./Core/Src/input_processing.c **** 
 240:./Core/Src/input_processing.c **** 	// RESET when start
 241:./Core/Src/input_processing.c **** 	if (start == 0) {
 1128              		.loc 1 241 12
 1129 00a6 084B     		ldr	r3, .L88+12
 1130 00a8 1B68     		ldr	r3, [r3]
 1131              		.loc 1 241 5
 1132 00aa 002B     		cmp	r3, #0
 1133 00ac 04D1     		bne	.L87
 242:./Core/Src/input_processing.c **** 		reset();
 1134              		.loc 1 242 3
 1135 00ae FFF7FEFF 		bl	reset
 243:./Core/Src/input_processing.c **** 		start = 1;
 1136              		.loc 1 243 9
 1137 00b2 054B     		ldr	r3, .L88+12
 1138 00b4 0122     		movs	r2, #1
 1139 00b6 1A60     		str	r2, [r3]
 1140              	.L87:
 244:./Core/Src/input_processing.c **** 	}
 245:./Core/Src/input_processing.c **** }
 1141              		.loc 1 245 1
 1142 00b8 00BF     		nop
 1143 00ba 80BD     		pop	{r7, pc}
 1144              	.L89:
 1145              		.align	2
 1146              	.L88:
 1147 00bc 00000000 		.word	status
 1148 00c0 00000000 		.word	index_mode
 1149 00c4 00000000 		.word	TIMES_INC
 1150 00c8 00000000 		.word	start
 1151              		.cfi_endproc
 1152              	.LFE77:
 1154              		.section	.text.fsm_simple_button_run,"ax",%progbits
 1155              		.align	1
 1156              		.global	fsm_simple_button_run
 1157              		.syntax unified
 1158              		.thumb
 1159              		.thumb_func
 1160              		.fpu softvfp
 1162              	fsm_simple_button_run:
 1163              	.LFB78:
 246:./Core/Src/input_processing.c **** 
 247:./Core/Src/input_processing.c **** void fsm_simple_button_run() {
 1164              		.loc 1 247 30
 1165              		.cfi_startproc
 1166              		@ args = 0, pretend = 0, frame = 0
 1167              		@ frame_needed = 1, uses_anonymous_args = 0
 1168 0000 80B5     		push	{r7, lr}
 1169              		.cfi_def_cfa_offset 8
 1170              		.cfi_offset 7, -8
 1171              		.cfi_offset 14, -4
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 27


 1172 0002 00AF     		add	r7, sp, #0
 1173              		.cfi_def_cfa_register 7
 248:./Core/Src/input_processing.c **** 	switch (buttonState) {
 1174              		.loc 1 248 2
 1175 0004 0D4B     		ldr	r3, .L96
 1176 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1177 0008 002B     		cmp	r3, #0
 1178 000a 02D0     		beq	.L91
 1179 000c 012B     		cmp	r3, #1
 1180 000e 0AD0     		beq	.L92
 249:./Core/Src/input_processing.c **** 	case BUTTON_RELEASED:
 250:./Core/Src/input_processing.c **** 		if (WhichButtonIsPressed()) {
 251:./Core/Src/input_processing.c **** 			buttonState = BUTTON_PRESSED;
 252:./Core/Src/input_processing.c **** 			input_processing();
 253:./Core/Src/input_processing.c **** 		}
 254:./Core/Src/input_processing.c **** 	case BUTTON_PRESSED:
 255:./Core/Src/input_processing.c **** 		if (!WhichButtonIsPressed()) {
 256:./Core/Src/input_processing.c **** 			buttonState = BUTTON_RELEASED;
 257:./Core/Src/input_processing.c **** 		}
 258:./Core/Src/input_processing.c **** 	default:
 259:./Core/Src/input_processing.c **** 		break;
 1181              		.loc 1 259 3
 1182 0010 11E0     		b	.L95
 1183              	.L91:
 250:./Core/Src/input_processing.c **** 			buttonState = BUTTON_PRESSED;
 1184              		.loc 1 250 7
 1185 0012 FFF7FEFF 		bl	WhichButtonIsPressed
 1186 0016 0346     		mov	r3, r0
 250:./Core/Src/input_processing.c **** 			buttonState = BUTTON_PRESSED;
 1187              		.loc 1 250 6
 1188 0018 002B     		cmp	r3, #0
 1189 001a 04D0     		beq	.L92
 251:./Core/Src/input_processing.c **** 			input_processing();
 1190              		.loc 1 251 16
 1191 001c 074B     		ldr	r3, .L96
 1192 001e 0122     		movs	r2, #1
 1193 0020 1A70     		strb	r2, [r3]
 252:./Core/Src/input_processing.c **** 		}
 1194              		.loc 1 252 4
 1195 0022 FFF7FEFF 		bl	input_processing
 1196              	.L92:
 255:./Core/Src/input_processing.c **** 			buttonState = BUTTON_RELEASED;
 1197              		.loc 1 255 8
 1198 0026 FFF7FEFF 		bl	WhichButtonIsPressed
 1199 002a 0346     		mov	r3, r0
 255:./Core/Src/input_processing.c **** 			buttonState = BUTTON_RELEASED;
 1200              		.loc 1 255 6
 1201 002c 002B     		cmp	r3, #0
 1202 002e 02D1     		bne	.L95
 256:./Core/Src/input_processing.c **** 		}
 1203              		.loc 1 256 16
 1204 0030 024B     		ldr	r3, .L96
 1205 0032 0022     		movs	r2, #0
 1206 0034 1A70     		strb	r2, [r3]
 1207              	.L95:
 1208              		.loc 1 259 3
 1209 0036 00BF     		nop
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 28


 260:./Core/Src/input_processing.c **** 	}
 261:./Core/Src/input_processing.c **** }
 1210              		.loc 1 261 1
 1211 0038 00BF     		nop
 1212 003a 80BD     		pop	{r7, pc}
 1213              	.L97:
 1214              		.align	2
 1215              	.L96:
 1216 003c 00000000 		.word	buttonState
 1217              		.cfi_endproc
 1218              	.LFE78:
 1220              		.text
 1221              	.Letext0:
 1222              		.file 2 "c:\\st\\stm32cubeide_1.7.0\\stm32cubeide\\plugins\\com.st.stm32cube.ide.mcu.externaltools
 1223              		.file 3 "c:\\st\\stm32cubeide_1.7.0\\stm32cubeide\\plugins\\com.st.stm32cube.ide.mcu.externaltools
 1224              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 1225              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1226              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1227              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1228              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1229              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 1230              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1231              		.file 11 "Core/Inc/global.h"
 1232              		.file 12 "Core/Inc/software_timer.h"
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 29


DEFINED SYMBOLS
                            *ABS*:0000000000000000 input_processing.c
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:19     .bss.buttonState:0000000000000000 buttonState
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:20     .bss.buttonState:0000000000000000 $d
                            *COM*:0000000000000032 str
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:23     .text.WhichButtonIsPressed:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:31     .text.WhichButtonIsPressed:0000000000000000 WhichButtonIsPressed
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:87     .text.clear_vertical:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:94     .text.clear_vertical:0000000000000000 clear_vertical
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:116    .text.clear_horizontal:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:123    .text.clear_horizontal:0000000000000000 clear_horizontal
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:145    .text.vertical_processing:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:152    .text.vertical_processing:0000000000000000 vertical_processing
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:211    .text.vertical_processing:0000000000000044 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:216    .text.horizontal_processing:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:223    .text.horizontal_processing:0000000000000000 horizontal_processing
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:282    .text.horizontal_processing:0000000000000044 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:287    .text.state_update:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:294    .text.state_update:0000000000000000 state_update
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:402    .text.state_update:0000000000000094 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:410    .text.check_state:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:417    .text.check_state:0000000000000000 check_state
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:459    .text.check_state:000000000000002c $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:464    .text.update_clock:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:471    .text.update_clock:0000000000000000 update_clock
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:519    .text.update_clock:0000000000000038 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:525    .text.reset:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:532    .text.reset:0000000000000000 reset
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:594    .text.reset:000000000000004c $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:601    .text.confirm_action:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:608    .text.confirm_action:0000000000000000 confirm_action
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:702    .text.confirm_action:0000000000000074 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:707    .text.state_handle:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:714    .text.state_handle:0000000000000000 state_handle
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:897    .text.state_handle:0000000000000128 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:908    .text.traffic_processing:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:915    .text.traffic_processing:0000000000000000 traffic_processing
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:999    .text.traffic_processing:0000000000000068 $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1007   .text.input_processing:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1014   .text.input_processing:0000000000000000 input_processing
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1147   .text.input_processing:00000000000000bc $d
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1155   .text.fsm_simple_button_run:0000000000000000 $t
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1162   .text.fsm_simple_button_run:0000000000000000 fsm_simple_button_run
C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s:1216   .text.fsm_simple_button_run:000000000000003c $d
                           .group:0000000000000000 wm4.0.e890922d021f7fff2fbf219cb2b38f03
                           .group:0000000000000000 wm4.stm32f1xx_hal_conf.h.21.185fa7e4004c86f1f34627ab1091dd60
                           .group:0000000000000000 wm4.stm32f1xx.h.39.208bb8a61c892b7c37d899c49a031330
                           .group:0000000000000000 wm4.stm32f103xb.h.38.ec967d5ad9d3269cb0788eebda048e38
                           .group:0000000000000000 wm4._newlib_version.h.4.1ef4e12f167f8b69d7c30054be56050d
                           .group:0000000000000000 wm4.features.h.33.318b64d71e0957639cfb30f1db1f7ec8
                           .group:0000000000000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:0000000000000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:0000000000000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:0000000000000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:0000000000000000 wm4.cmsis_version.h.32.4d5822004c01a829a975260e854b5f8e
                           .group:0000000000000000 wm4.core_cm3.h.66.fc46cac19810db8f98d67da7ef88f42c
                           .group:0000000000000000 wm4.cmsis_gcc.h.26.225e4f5469716fdeef823d1102f5b23e
ARM GAS  C:\Users\xanlo\AppData\Local\Temp\ccpFDUe8.s 			page 30


                           .group:0000000000000000 wm4.core_cm3.h.127.f4474120f1a7524deb56f9d74ff175da
                           .group:0000000000000000 wm4.stm32f103xb.h.573.10249aa7473ca93be896fed94046a725
                           .group:0000000000000000 wm4.stm32f1xx.h.162.96b09079a093c34dbd7f0b85cbd0ddee
                           .group:0000000000000000 wm4.stm32_hal_legacy.h.23.91ba5b544a4c2be2620a1e7ff0049e10
                           .group:0000000000000000 wm4.stddef.h.39.144cf5ddcd53cbfdac30259dc1a6c87f
                           .group:0000000000000000 wm4.stm32f1xx_hal_def.h.57.18d01ce1aa74e9fb44dbf16f821a574a
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.95.21591bbc513aaa813c0b8640c3b32517
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc_ex.h.22.8763f99bc1e3e2dcf0febe9161d81b37
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.1202.f8e5f9e0cf4eef7840facf5396029056
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.22.fa638d688dcc57ca806fe6a7831b0d04
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio_ex.h.22.51a50ef3512cd78017ce666a32d364bf
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.263.f5ebf2f545ade59412ab9261c8e35dc4
                           .group:0000000000000000 wm4.stm32f1xx_hal_exti.h.22.e26491d042c8079c3ca67eca341af862
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.22.3c14338534886827bf3aeaa2a7f412a1
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma_ex.h.22.001ac4d7f81ccbdcae49bd65c13858c8
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.409.cafcd2cfe701091535636be537c18293
                           .group:0000000000000000 wm4.stm32f1xx_hal_cortex.h.22.b5f4174bb6a50d95405567b8f50e0900
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash.h.22.5cea9a7210e6315b41724b47b5fdf203
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash_ex.h.22.d4e19c21f2a86fa2f8ec2c2d5f1ab2af
                           .group:0000000000000000 wm4.stm32f1xx_hal_pwr.h.22.3438c476faafc3240bf146f143df3fcd
                           .group:0000000000000000 wm4.stm32f1xx_hal_tim.h.22.a16e206564e97dbace9faae59a0d6008
                           .group:0000000000000000 wm4.stm32f1xx_hal_uart.h.22.5f7992e497faa36aa98f09f7214f4dbb
                           .group:0000000000000000 wm4.stm32f1xx_hal.h.88.91065c0692bed6019c34f1e9c00589fd
                           .group:0000000000000000 wm4.main.h.63.d4f8a4d7b478ddd0ed8a349f4df0d070
                           .group:0000000000000000 wm4.global.h.9.07cc41e1ed932596c8485394ac422e11
                           .group:0000000000000000 wm4.software_timer.h.9.85139a8d176fe1bcfcf1e8be0a353955
                           .group:0000000000000000 wm4.traffic_light.h.14.ab1d9e8ae02845570467e9cf97ea0d9f

UNDEFINED SYMBOLS
is_button_pressed
clear_led
set_led_color
CURRENT_STATE
LED_TIME
SEG7_CLOCK
updateDisplay
setTimer2
timer2_flag
HAL_GPIO_WritePin
HAL_GPIO_TogglePin
setTimer1
index_mode
timer1_flag
TIMES_INC
status
start
